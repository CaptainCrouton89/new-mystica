title: Craft Higher Generation Items
story_id: US-401
feature_id: F-06
template: ~/.claude/file-templates/init-project/user-stories/story-title.yaml
status: planned
last_updated: 2025-10-19

user_story:
  as_a: "Mobile RPG Player"
  i_want: "to fuse two items to create a stronger child item"
  so_that: "I can progress to higher generations and increase my power"

acceptance_criteria:
  - "[ ] Given inventory, when player enters crafting mode, then show all craftable items"
  - "[ ] Given crafting mode, when player selects first item, then filter available items (same type, same generation)"
  - "[ ] Given valid second item selected, when both chosen, then show preview: parent stats, child generation, crafting time"
  - "[ ] Given preview shown, when player confirms craft, then consume both parent items from inventory"
  - "[ ] Given craft confirmed, when timer starts, then display countdown based on generation (Gen1→Gen2: 1hr, Gen2→Gen3: 4hr)"
  - "[ ] Given timer running, when complete, then generate child item with combined stats and add to inventory"
  - "[ ] Given attempting to craft Gen3+, when selected, then block action and show 'Max generation reached' message"

context:
  why: "Crafting is the primary progression system. Must enforce generation limits and same-type/same-gen rules clearly."
  related: "Links to US-301 (Inventory), F-05 (AI Generation), F-03 (Items)"

technical_notes:
  apis: "POST /crafting/start with parent_item_ids, returns craft_session_id and timer. POST /crafting/complete when timer done"
  data: "Crafting rules: same type, same generation, max Gen3. Timer: Gen1→2 (1hr), Gen2→3 (4hr). Stats inherit from parents."
  dependencies: "Background timer, push notification when crafting completes, AI generation for child stats"
